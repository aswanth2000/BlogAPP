<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" />
    <link rel="stylesheet" href="/stylesheets/index.css" type="text/css" />
    <title>HomePage</title>
</head>

<body>
    <div class="ui fixed inverted menu">
        <div class="ui container">
            <div class="header item"><i class="code icon"></i>Blog Site</div>
            <a href="/" class="item">Home</a>
            <a href="/blogs/new" class="item">New Post</a>
            <div class="right menu">
                <% if(!currentUser){ %>
                    <div class="item">
                        <a href="/login" class="ui green basic button">Login</a>
                    </div>
                    <div class="item">
                        <a href="/register" class="ui primary button">Sign Up</a>
                    </div>
                    <% }else{ %>
                        <div class="item">
                            <button class="ui labeled icon inverted grey button">
                            <i class="user circle outline icon"></i>
                            <%= currentUser.username %>
                            </button>
                        </div>
                        <div class="item">
                            <a href="/logout" class="ui inverted red button">Logout</a>
                        </div>
                        <% } %>
            </div>
        </div>
    </div>
    <% if( msg.length > 0){  %>
        <div class="ui positive compact message" style="margin-top: 6em;">
            <div class="header">
                <%= msg %>
            </div>
        </div>
        <%  }%>

            <div class="main container">
                <div class="ui center aligned huge header">Blog</div>
                <div class="ui vertically divided grid">
                    <div class="three column row">
                        <% blogs.forEach(function(blog){ %>
                            <div class="column img">
                                <div class="image">
                                    <img src="<%= blog.image %> ">
                                </div>

                                <div class="content">
                                    <a class="ui large header" href="/blogs/<%= blog._id %> ">
                                        <%= blog.title %>
                                    </a>
                                    <p style="margin-top: 1.2%;">
                                        <span style="color: #4ca2cd;font-weight: bold; text-align: right;">
                                   - <%= blog.author.username %>
                                </span>

                                    </p>
                                    <div class="meta">
                                        <span><%= blog.created.toDateString() %> </span>
                                    </div>
                                    <div class="description">
                                        <p>
                                            <%= blog.body.substring(0,300) %> ....
                                        </p>
                                    </div>

                                </div>
                            </div>

                            <% }); %>
                    </div>
                </div>
            </div>
</body>

</html>